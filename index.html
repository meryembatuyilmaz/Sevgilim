<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalpli Snake ðŸ’—</title>

<style>
body {
  margin: 0;
  background: #111;
  overflow: hidden;
  touch-action: none;
}

canvas {
  display: block;
  margin: auto;
  background: #1c1c1c;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const box = 20;
let snake = [{ x: 5, y: 5 }];
let direction = "RIGHT";

let heart = {
  x: Math.floor(Math.random() * (canvas.width / box)),
  y: Math.floor(Math.random() * (canvas.height / box))
};

let score = 0;

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Kalp
  ctx.font = "18px Arial";
  ctx.fillText("ðŸ’—", heart.x * box, heart.y * box + 18);

  // YÄ±lan
  snake.forEach((part, i) => {
    ctx.fillStyle = i === 0 ? "#ff7eb9" : "#ffb3d9";
    ctx.fillRect(part.x * box, part.y * box, box, box);
  });

  // Hareket
  let head = { ...snake[0] };
  if (direction === "LEFT") head.x--;
  if (direction === "RIGHT") head.x++;
  if (direction === "UP") head.y--;
  if (direction === "DOWN") head.y++;

  // Kalp yeme
  if (head.x === heart.x && head.y === heart.y) {
    score++;
    heart = {
      x: Math.floor(Math.random() * (canvas.width / box)),
      y: Math.floor(Math.random() * (canvas.height / box))
    };
  } else {
    snake.pop();
  }

  snake.unshift(head);

  // Skor
  ctx.fillStyle = "white";
  ctx.font = "16px Arial";
  ctx.fillText("Kalp: " + score, 10, 20);
}

setInterval(draw, 120);

// Dokunma ile kontrol
let startX, startY;

canvas.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
});

canvas.addEventListener("touchend", e => {
  let dx = e.changedTouches[0].clientX - startX;
  let dy = e.changedTouches[0].clientY - startY;

  if (Math.abs(dx) > Math.abs(dy)) {
    direction = dx > 0 ? "RIGHT" : "LEFT";
  } else {
    direction = dy > 0 ? "DOWN" : "UP";
  }
});
</script>

</body>
</html>
